jQuery(document).ready((function(t){const e=t('.compat-field-pvtmed th').html()+t('.compat-field-pvtmed .field').html();t('.compat-field-pvtmed').html(e);t(document).ajaxComplete((function(e,a,i){const n=decodeURIComponent(i.data);if(-1!==n.indexOf('action=save-attachment-compat')){const e=t('.attachment-info [data-setting="url"] input'),a=-1!==e.val().indexOf(Pvtmed.privateUrlBase),i=-1!==e.val().indexOf(Pvtmed.publicUrlBase),d=-1===n.indexOf('pvtmed'),c=-1!==n.indexOf('pvtmed');if(a&&d||i&&c){const a=c?Pvtmed.publicUrlBase:Pvtmed.privateUrlBase,i=c?Pvtmed.privateUrlBase:Pvtmed.publicUrlBase,n=e.val().replace(a,i);e.val(n);0<t('.media-modal-content video').length&&t('.media-modal-content video').each((function(e,a){const i=t(a);i.attr('src',n);i.find('source').attr('src',n)}));e.removeClass('pvtmed-highlight').addClass('pvtmed-highlight');setTimeout((function(){e.removeClass('pvtmed-highlight')}),3500)}}}));const a=function(){return window.confirm(Pvtmed.deactivateConfirm)};t('.wp-list-table.plugins tr[data-slug="private-media"] .deactivate a').on('click',(function(){return a()}));!t('.wp-list-table.plugins tr[data-slug="private-media"] input[type="checkbox"]').prop('checked')||'deactivate-selected'!==t('#bulk-action-selector-top').val()&&'deactivate-selected'!==t('#bulk-action-selector-bottom').val()||t('.plugins-php #bulk-action-form').on('submit',(function(e){e.preventDefault();a()&&t(this).submit()}));!function(){if(!wp.media.view.Attachment)return;const e=t('#tmpl-attachment');if(!e)return;const a=e.text();let i='',n=0;for(;;){const t=a.indexOf('<img ',n);if(-1===t)break;let e=a.indexOf(' />',t+4);if(-1===e)break;e+=3;i+=a.substring(n,t);n=e;i+=a.substring(t,e);i+='<# if ( data.privateMedia ) { #>';i+='<span class="dashicons dashicons-lock"></span>';i+='<# } #>'}i+=a.substring(n);const d=document.createElement('script');d.type='text/html';d.id='tmpl-attachment-pvtmed';d.innerHTML='<div class="pvtmed-attachment">'+i+'</div>';document.head.appendChild(d);wp.media.view.Attachment.prototype.template=wp.media.template('attachment-pvtmed')}()}));